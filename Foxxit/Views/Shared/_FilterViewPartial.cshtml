@using Foxxit.Models.DTO
@using Foxxit.Enums
@model SearchReturnModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@if (Model.SearchedCategory.Equals(nameof(SearchCategory.All)))
{
    <article>
        <div class="filtered_container">

            <h2>Found SubReddits</h2>
            @foreach (var subReddit in Model.SubReddits)
            {
                <div class="article_item">@Html.ActionLink($"{subReddit.Name}", "SubReddit", "Foxxit", new { subRedditId = subReddit.Id })</div>
            }
        </div>
    </article>

    <article>
        <div class="filtered_container">

            <h2>Found Posts</h2>
            @foreach (var post in Model.Posts)
            {
                <div class="article_item">@Html.ActionLink($"{post.Title} in {post.SubReddit.Name}", "ViewPost", "Foxxit", new { postId = post.Id })</div>
            }
        </div>
    </article>

    <article>
        <div class="filtered_container">

            <h2>Found Comments</h2>
            @foreach (var comment in Model.Comments.Where(c => c.PostId != null))
            {
                <div class="article_item">@Html.ActionLink($"{comment.Text.Substring(0, comment.Text.Length > 101 ? 100 : comment.Text.Length)} on {comment.Post.Title}", "ViewPost", "Foxxit", new { postId = comment.Post.Id })</div>
            }
        </div>
    </article>
}

@if (Model.SearchedCategory.Equals(nameof(SearchCategory.SubReddit)))
{
    <article>
        <div class="filtered_container">

            <h2>Found SubReddits</h2>
            @foreach (var subReddit in Model.SubReddits)
            {
                <div class="article_item">@Html.ActionLink($"{subReddit.Name}", "SubReddit", "Foxxit", new { subRedditId = subReddit.Id })</div>
            }
        </div>
    </article>
}

@if (Model.SearchedCategory.Equals(nameof(SearchCategory.Post)))
{
    <article>
        <div class="filtered_container">

            <h2>Found Posts</h2>
            @foreach (var post in Model.Posts)
            {
                <div class="article_item">@Html.ActionLink($"{post.Title} in {post.SubReddit.Name}", "ViewPost", "Foxxit", new { subRedditId = post.Id })</div>
            }
        </div>
    </article>
}

@if (Model.SearchedCategory.Equals(nameof(SearchCategory.Comment)))
{
    <article>
        <div class="filtered_container">

            <h2>Found Comments</h2>
            @foreach (var comment in Model.Comments.Where(c => c.PostId != null))
            {
                <div class="article_item">@Html.ActionLink($"{comment.Text.Substring(0, comment.Text.Length > 101 ? 100 : comment.Text.Length)} on {comment.Post.Title}", "ViewPost", "Foxxit", new { postId = comment.Post.Id })</div>
            }
        </div>
    </article>
}
@using Foxxit.Models.ViewModels
@model MainViewModel
@{Layout = "_Layout";}

<head>
    <link rel="stylesheet" href="~/css/MainView.css">
</head>

<div class="main_menu">

    <div class="main_menu_intro">

        <h2>Welcome to Foxxit</h2>
        <div class="main_menu_buttons">
            <div class="main_menu_buttons">@Html.ActionLink("HOT", "ListHotTopics", "Home")</div>
            <div class="main_menu_buttons">@Html.ActionLink("NEW", "ListNewTopics", "Home")</div>
            <div class="main_menu_buttons">@Html.ActionLink("TOP", "ListTopTopics", "Home")</div>
        </div>
    </div>

    @foreach (var post in Model.Posts)
    {

        <div class="main_menu_post">

            <div class="main_menu_post_left">
                <div class="post_vote">@Html.ActionLink("↑", "UpVote", "Home", new { postId = post.Id })</div>
                <div class="post_vote">@post.Votes.Count()</div>
                <div class="post_vote">@Html.ActionLink("↓", "DownVote", "Home", new { postId = post.Id })</div>
            </div>

            <div class="main_view_post_right">
                <div class="post_header">
                    <div class="post_text"><h4>@post.Title</h4><p>Posted by @post.User.UserName @(DateTime.Now - @post.CreatedAt) ago in @post.SubReddit.Name</p></div>
                    <div class="main_menu_buttons">JOIN</div>
                </div>

                <div class="post_content">
                    @if (post.Text is null)
                    {
                        <img width="100%" src="@post.ImageURL" alt="@post.Title" />
                    }
                    else
                    {
                        <p>@post.Text</p>
                    }
                </div>

                <div class="post_footer">
                    <div class="vote">@Html.ActionLink($"{post.Comments.Count()} COMMENTS", "Comments", "Home", new { postId = post.Id })</div>
                </div>
            </div>
        </div>
    }
</div>